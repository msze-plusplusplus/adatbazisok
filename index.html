<!DOCTYPE html><html><head><meta charset="utf-8"><style type="text/css">p {
  text-align: justify;
  width: 100%;
}

.page-break {
  page-break-after: always;
}

img {
  max-width: 100%;
  max-height: 20cm;
  margin: 0 auto;
  display: block;
}
/*# sourceURL=style.css*/</style><style type="text/css">/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
/*# sourceURL=/home/runner/work/adatbazisok/adatbazisok/pdf/node_modules/highlight.js/styles/github.css*/</style></head>
<body class="">
<h1 id="webtárhely">Webtárhely</h1>
<h2 id="leírás-és-funkcionális-követelmények">Leírás és funkcionális követelmények</h2>
<p>Az általunk választott téma egy webtárhely séma alapszintű funkcióinak leképezése adatbázis szemszögből.</p>
<p>Az adatbázisban tárolhatóak az egyes webtárhelyek és azoknak adatai. Vannak webtárhely típusból jövő beállítási adatok, amik mint csomag beállítások foghatóak fel, illetve vannak a webtárhely a felhasználói által specializált konfigurációs beállítások. Ezek a beállítások együtt alkotják, majd a webtárhely költségeit. A webtárhelyek létrehozásánál, ki lehet választani, hogy melyik szerver központba jöjjön létre a mi tárhelyünk.</p>
<p>A adatbázisban tárolva vannak a felhasználók és adataik, akik a webtárhely létrehozáson kívül, képesek saját domaint is csatolni fiókjukhoz és az egyes webtárhelyekhez.</p>
<p>A fizetési kötelezettségek és befizetési elégtételeik is el vannak tárolva. Külön kerülnek ezek az adatok a két oldalhoz eltárolásra.</p>
<p>Folyamatos statisztikát állítunk elő és tároljuk el, hogy a felhasználók visszajelzést kaphassanak a látogatottsági számokról és az új egyedi látogatásokról, míg az "élő"/nap/heti adatokért más alrendszer felelős, a hosszútávú (havi) adatok az adatbázisban kerülnek letárolásra. Ezek az adatok, az egyes domain címekhez vannak csatolva.</p>
<p>Továbbá az adatbázis rendelkezik értesítésekkel, amik a felhasznélók figyelmét hivatottak felhívni és tájékoztatni esetleges hibákról vagy tervezett karbantartásokról. Például forgalomugrásról, befizetési kötelezettségekről, befizetett tranzakciókról, bérleti lejáratokról és így tovább.</p>
<h2 id="kérdések">Kérdések</h2>
<ol>
<li><p>Hány <em>.com</em> TLD-jű domain van beregisztrálva a rendszerbe?</p>
</li>
<li><p>Hol találhatók Adatközpontok és mi a jeligéjük?</p>
</li>
<li><p>Mi a 3 legtöbb szerverteremmel rendelkező városok nevei?</p>
</li>
<li><p>Mely csomagok tartalmaznak PHP futtatási lehetőséget?</p>
</li>
<li><p>Mely webtárhelyek rendelkeznek SSH eléréssel és sávszélességük nagyobb mint 1 Gigabit/s, illetve mikor lettek ezek létrehozva?</p>
</li>
<li><p>Mely webtárhelyek nem rendelkezik egy Domain címmel sem?</p>
</li>
<li><p>Van-e az <em>1</em>-es Id-val rendelkező felhasználónak nem kifizetett számlája és mi annak az azonosítója?</p>
</li>
<li><p>Melyek azok a webtárhelyek, amikhez a kapcsolt domain név lejárt?</p>
</li>
<li><p>Milyen kifizetések történtek <em>2019-09-12</em> - <em>2020-02-23</em> között regisztrált felhasználóknak? Melyik felhaszálónak és mi volt a tranzakció azonosítója?</p>
</li>
<li><p>Melyek azok at adatközpontok, ahol legalább a webtárhelyek fele rendelkezik adatbázissal, PHP-val és e-mail fiókkal is?</p>
</li>
<li><p>Mely PHP futtatással rendelkező domainen lesz karbantartás a következő hónapban (30 nap), a <em>BUD1</em> adatközpontban?</p>
</li>
<li><p>Mely <em>.hu</em> domain nevek voltak az utóbbi <em>2 hónapban</em> befizetve?</p>
</li>
<li><p>Kik azok a felhasználók, akiknek a legtöbb érvényben lévő értesítése van?</p>
</li>
<li><p>Melyek azok a domain nevek, amelyek <em>Maxi</em> csomaggal rendelkeznek?</p>
</li>
<li><p>Melyik a legterheltebb adatközpont? (Foglalt GB / Látogatottság)</p>
</li>
<li><p>Kik azok a felhasználók, akik a határidő előtti napon fizették be a számlát? (és melyek ezek a számlák?)</p>
</li>
<li><p>PHP futtatás nélkül, mely weboldalak látogatottsága a legmagasabb?</p>
</li>
</ol>
<div class="page-break"></div>

<h2 id="adatmodell">Adatmodell</h2>
<p><img src="WebStorage.png" alt="UML Adatbázis séma" title="UML Adatbázis séma"></p>
<div class="page-break"></div>

<h2 id="relációs-séma">Relációs séma</h2>
<center>

<table>
<thead>
<tr>
<th>Adatbázis</th>
<th>Webtárhely (WebStorage)</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Felhasználók</td>
<td><strong>User</strong> (Id, FullName, UserName, Email, Password, Registration, Blocked, MaximumStorage)</td>
<td></td>
</tr>
<tr>
<td>Tárhely típus</td>
<td><strong>StorageType</strong> (Id, SSHEnabled, PHPEnabled, MaximumEmailAccounts, MaximumFTPAccounts, MaximumDatabaseNumber, PHPMemoryLimit, MaximumPHPExecutionTime, CPanelIsEnabled, BaseCost, DataTrafficMultiplier)</td>
<td></td>
</tr>
<tr>
<td>Szerver központ</td>
<td><strong>DataCenter</strong> (Id, Name, City, Number, Area, StorageCapacity)</td>
<td></td>
</tr>
<tr>
<td>Tárhely</td>
<td><strong>Storage</strong> (Id, UserId, Creation, Expiration, TypeId, Size, MaximumDataTraffic, EmailStorageSize, DatabaseSize, DataCenterId, Cost, Name)</td>
<td></td>
</tr>
<tr>
<td>Domain név</td>
<td><strong>Domain</strong> (Id, UserId, DomainAddress, StorageId, TLD, Registration, Expiration, NameServer1, NameServer2, NameServer3, NameServer4)</td>
<td></td>
</tr>
<tr>
<td>Költségek</td>
<td><strong>Bill</strong> (Id, UserId, StorageId, DomainId, Date, Deadline, Cost, BillId)</td>
<td></td>
</tr>
<tr>
<td>Kifizetések</td>
<td><strong>Payment</strong> (Id, UserId, Date, TransactionId, BillId)</td>
<td></td>
</tr>
<tr>
<td>Statisztika</td>
<td><strong>Statistic</strong> (Id, DomainId, Month, Views, UniqueViewers)</td>
<td></td>
</tr>
<tr>
<td>Értesítések</td>
<td><strong>Notification</strong> (Id, UserId, StorageId, DomainId, Creation, TimeFrameStart, TimeFrameEnd, Title, Message)</td>
<td></td>
</tr>
</tbody></table>
</center>

<h2 id="inputoutput-adatok-adattípusba-rendezve">Input/Output adatok adattípusba rendezve</h2>
<h3 id="user">User</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>FullName</td>
<td>varchar</td>
<td align="right">60</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>UserName</td>
<td>varchar</td>
<td align="right">30</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Email</td>
<td>varchar</td>
<td align="right">120</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Password</td>
<td>varchar</td>
<td align="right">120</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Registration</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>NOW()</code></td>
</tr>
<tr>
<td>Blocked</td>
<td>boolean</td>
<td align="right"></td>
<td align="center"></td>
<td><code>false</code></td>
</tr>
<tr>
<td>MaximumStorage</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td><code>5</code></td>
</tr>
</tbody></table>
</center>

<h3 id="storagetype">StorageType</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>SSHEnabled</td>
<td>boolean</td>
<td align="right"></td>
<td align="center"></td>
<td><code>false</code></td>
</tr>
<tr>
<td>PHPEnabled</td>
<td>boolean</td>
<td align="right"></td>
<td align="center"></td>
<td><code>false</code></td>
</tr>
<tr>
<td>MaximumEmailAccounts</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>MaximumFTPAccounts</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>MaximumDatabaseNumber</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>PHPMemoryLimit</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>MaximumPHPExecutionTime</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>CPaneldIsEnabled</td>
<td>boolean</td>
<td align="right"></td>
<td align="center"></td>
<td><code>false</code></td>
</tr>
<tr>
<td>BaseCost</td>
<td>decimal</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>DataTrafficMultiplier</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Name</td>
<td>varchar</td>
<td align="right">120</td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
</center>

<h3 id="datacenter">DataCenter</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Name</td>
<td>varchar</td>
<td align="right">30</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>City</td>
<td>varchar</td>
<td align="right">80</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Number</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Area</td>
<td>decimal</td>
<td align="right">X</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>StorageCapacity</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
</center>

<h3 id="storage">Storage</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>UserId</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Creation</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>NOW()</code></td>
</tr>
<tr>
<td>Expiration</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>DATE_ADD(NOW(), INTERVAL 1 YEAR)</code></td>
</tr>
<tr>
<td>TypeId</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Size</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>MaximumDataTraffic</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>EmailStorageSize</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>DatabaseSize</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>Cost</td>
<td>decimal</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Name</td>
<td>varchar</td>
<td align="right">80</td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
</center>

<h3 id="domain">Domain</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>UserId</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>DomainAddress</td>
<td>varchar</td>
<td align="right">100</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>StorageId</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>TLD</td>
<td>varchar</td>
<td align="right">5</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Registration</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>NOW()</code></td>
</tr>
<tr>
<td>Expiration</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>DATE_ADD(NOW(), INTERVAL 1 YEAR)</code></td>
</tr>
<tr>
<td>NameServer1</td>
<td>varchar</td>
<td align="right">100</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>NameServer2</td>
<td>varchar</td>
<td align="right">100</td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>NameServer3</td>
<td>varchar</td>
<td align="right">100</td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>NameServer4</td>
<td>varchar</td>
<td align="right">100</td>
<td align="center">X</td>
<td></td>
</tr>
</tbody></table>
</center>

<h3 id="bill">Bill</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>UserId</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>StorageId</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>DomainId</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>Date</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>NOW()</code></td>
</tr>
<tr>
<td>Deadline</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>DATE_ADD(NOW(), INTERVAL 1 MONTH)</code></td>
</tr>
<tr>
<td>Cost</td>
<td>decimal</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>BillId</td>
<td>varchar</td>
<td align="right">100</td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
</center>

<h3 id="payment">Payment</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>UserId</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Date</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>NOW()</code></td>
</tr>
<tr>
<td>TranscactionId</td>
<td>varchar</td>
<td align="right">100</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>BillId</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
</center>

<h3 id="statistic">Statistic</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>DomainId</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Month</td>
<td>date</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Views</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td><code>0</code></td>
</tr>
<tr>
<td>UniqueViewers</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td><code>0</code></td>
</tr>
</tbody></table>
</center>

<h3 id="notification">Notification</h3>
<center>

<table>
<thead>
<tr>
<th>Mező</th>
<th>Típus</th>
<th align="right">Hossz</th>
<th align="center">Opcionális</th>
<th>Alapértelmezett érték</th>
</tr>
</thead>
<tbody><tr>
<td>Id</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>UserId</td>
<td>int</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>StorageId</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>DomainId</td>
<td>int</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>Creation</td>
<td>datetime</td>
<td align="right"></td>
<td align="center"></td>
<td><code>NOW()</code></td>
</tr>
<tr>
<td>TimeFrameStart</td>
<td>datetime</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>TimeFrameEnd</td>
<td>datetime</td>
<td align="right"></td>
<td align="center">X</td>
<td></td>
</tr>
<tr>
<td>Title</td>
<td>varchar</td>
<td align="right">100</td>
<td align="center"></td>
<td></td>
</tr>
<tr>
<td>Message</td>
<td>longtext</td>
<td align="right"></td>
<td align="center"></td>
<td></td>
</tr>
</tbody></table>
</center>

<h2 id="elsődleges-kulcsok">Elsődleges kulcsok</h2>
<h2 id="megszorítások">Megszorítások</h2>



</body></html>